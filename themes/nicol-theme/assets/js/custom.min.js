"use strict";

function js_prefixAjaxDoneHandler(e) {
    0 < jQuery("select.orderby").length && jQuery("select.orderby").select2({
        width: "100%",
        dropdownParent: jQuery("select.orderby").parent()
    })
}

function update_product_count() {
    var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : jQuery(".woocommerce-result-count"),
        o = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : jQuery(".woocommerce-result-count").data("product-per-page"),
        t = e.text().trim().split(" "),
        n = t[1].split("–");
    n[1] = Number(n[1]) + Number(o), n[1] > t[3] && (n[1] = t[3]), t[1] = n.join("–"), e.html(t.join(" "))
}

function apply_masonry(e, o) {
    var t = o.data("horizontalorder");
    e.imagesLoaded(function() {
        o.masonry({
            columnWidth: ".grid-sizer",
            itemSelector: ".iqonic-masonry-item",
            horizontalOrder: t
        })
    })
}! function(r) {
    var o = r(window).scrollTop();
    r(window).scroll(function() {
        0 < r(".has-sticky").length && ((e = r(window).scrollTop()) < o ? (r(".has-sticky").addClass("header-up"), r("body").addClass("header--is-sticky"), r(".has-sticky").removeClass("header-down")) : (r(".has-sticky").addClass("header-down"), r(".has-sticky").removeClass("header-up "), r("body").removeClass("header--is-sticky")), 0 == e && (r(".has-sticky").removeClass("header-up"), r(".has-sticky").removeClass("header-down"), r("body").removeClass("header--is-sticky")), o = e);
        var e = r(window).scrollTop() / (r(document).height() - r(window).height());
        r(".text-top").css("--progress", e)
    }), r(window).on("load", function(e) {
        jQuery(document).on("click", "button.plus, button.minus", function() {
            r('button[name="update_cart"]').removeAttr("disabled");
            var e = r(this).closest(".quantity").find(".qty");
            "" == e.val() && e.val(0);
            var o = parseFloat(e.val()),
                t = parseFloat(e.attr("max")),
                n = parseFloat(e.attr("min")),
                s = parseFloat(e.attr("step"));
            r(this).is(".plus") ? t && t <= o ? e.val(t) : e.val(o + s) : n && o <= n ? e.val(n) : 1 <= o && e.val(o - s)
        }), new WOW({
            boxClass: "wow",
            animateClass: "animated",
            offset: 0,
            mobile: !0,
            live: !0
        }).init(), 0 < jQuery(".iqonic-masonry-grid").length && jQuery(".iqonic-masonry-grid").each(function() {
            var e = jQuery(this),
                o = e.data("horizontal-order");
            jQuery(".iqonic-masonry-block").imagesLoaded(function() {
                e.masonry({
                    columnWidth: ".grid-sizer",
                    itemSelector: ".iqonic-masonry-item",
                    horizontalOrder: o
                })
            })
        }), r(document).on("click", ".custom-toggler", function() {
            r(".css_prefix-mobile-menu ").hasClass("menu-open") ? (r(".css_prefix-mobile-menu ").toggleClass("open-delay"), setTimeout(function() {
                r(".css_prefix-mobile-menu ").toggleClass("menu-open"), r(".css_prefix-mobile-menu ").toggleClass("open-delay")
            }, 1e3)) : r(".css_prefix-mobile-menu ").toggleClass("menu-open"), r(".opn-menu").toggleClass("css_prefix-open")
        }), r(document).on("click", ".ham-toggle", function() {
            r(".ham-toggle .menu-btn").toggleClass("is-active")
        }), r(document).on("click", ".mob-toggle", function() {
            r("body").toggleClass("overflow-hidden")
        })
    }), r(document).ready(function() {
        function e() {
            var e = jQuery(".header-default");
            e && (e = e.height(), jQuery("html").css("--header-height", e / 16 + "em"))
        }
        r(".iq-fancybox-image").on("click", function() {
            var t = 0;
            ! function e() {
                var o = r(".dialog-widget.dialog-lightbox-widget.dialog-type-buttons.dialog-type-lightbox.elementor-lightbox");
                2 === o.length ? (o.eq(1).remove(), console.log("Second dialog removed after ".concat(t + 1, " attempts."))) : t++ < 10 ? (console.log("Attempt ".concat(t, ": Found ").concat(o.length, " dialogs. Retrying...")), setTimeout(e, 100)) : console.log("Max attempts reached. Dialogs not found with length 2.")
            }()
        }), r("ul.sf-menu").superfish({
            delay: 500,
            onBeforeShow: function(e) {
                var o, t, n = r(this),
                    s = 0,
                    i = 0,
                    a = 0;
                1 == n.length && (t = r("#page.site").width(), s = n.parents("li").eq(0).offset().left, i = n.parents("li").eq(0).outerWidth(), a = n.outerWidth(), n.hasClass("iqonic-megamenu-container") && (n.hasClass("iqonic-full-width") && r(".iqonic-megamenu-container.iqonic-full-width").css({
                    left: -s
                }), n.hasClass("iqonic-container-width") && (o = (0 < n.closest(".elementor-container").length ? n.closest(".elementor-container") : n.parents("li").eq(0).closest("header .container-fluid nav,header .container nav")).offset(), r(".iqonic-megamenu-container.iqonic-container-width").css({
                    left: -(s - o.left)
                }))), t - 20 < s + i + a && 0 < s - a ? (n.addClass("open-submenu-main"), n.css({
                    left: "auto",
                    right: "0"
                })) : (n.removeClass("open-submenu-main"), n.css({}))), 1 < n.parents("ul").length && ((t = r("#page.site").width()) - 20 < (s = n.parents("ul").eq(0).offset().left) + (i = n.parents("ul").eq(0).outerWidth()) + (a = n.outerWidth()) && 0 < s - a ? (n.addClass("open-submenu-left"), n.css({
                    left: "auto",
                    right: "100%"
                })) : n.removeClass("open-submenu-left"))
            }
        }), 0 < r(".btn-search").length && (r(".btn-search").click(function() {
            r(this).parent().find(".css_prefix-search").toggleClass("search--open")
        }), r(".btn-search-close").click(function() {
            r(this).closest(".css_prefix-search").toggleClass("search--open")
        })), r(".navbar-toggler").click(function() {
            r(window).width() < 1200 && r("body").toggleClass("overflow-hidden")
        }), r(window).on("resize", function() {
            1200 < r(window).width() ? r("body").hasClass("overflow-hidden") && r("body").removeClass("overflow-hidden") : r(".navbar-toggler").hasClass("moblie-menu-active") && r("body").addClass("overflow-hidden")
        }), 0 < r("select").length && (r("select").each(function() {
            var e = {
                width: "100%",
                dropdownParent: r(this).parent()
            };
            0 < r(this).parent().closest(".checkout").length && (e = {
                width: "100%"
            }), r(this).select2(e)
        }), r(".select2-container").addClass("wide")), 0 < r(".shop-filter-sidebar").length && r(document).on("click", ".shop-filter-sidebar", function() {
            r("body").find(".css_prefix-woo-sidebar").toggleClass("woo-sidebar-open")
        }), r("img").removeAttr("title"), e(), jQuery(window).resize(function() {
            console.log("widnow resize"), e()
        })
    }), jQuery(window).ready(function() {
        0 < jQuery(".iqonic-masonry-grid").length && jQuery(".iqonic-masonry-grid").each(function() {
            apply_masonry(jQuery(".iqonic-masonry-block"), jQuery(this))
        })
    })
}(jQuery), jQuery(document).ready(function() {
    jQuery(".icheckbox_square-blue").removeClass("icheckbox_square-blue")
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbS5qcyJdLCJuYW1lcyI6WyJqc19wcmVmaXhBamF4RG9uZUhhbmRsZXIiLCJlIiwialF1ZXJ5IiwidXBkYXRlX3Byb2R1Y3RfY291bnQiLCJsZW5ndGgiLCJyZXN1bHRfY291bnRfZWxlbWVudCIsInNlbGVjdDIiLCJ3aWR0aCIsInBlcl9wYWdlZCIsImRyb3Bkb3duUGFyZW50IiwicGFyZW50IiwiY291bnRfYXJyIiwiY29udGVudF90ZXh0X2FyciIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImRhdGEiLCJ0cmltIiwic3BsaXQiLCJodG1sIiwiam9pbiIsInNlbGVjdG9yIiwiaXRlbVNlbGVjdG9yIiwiaG9yaXpvbnRhbE9yZGVyIiwiaG9yaXpvbnRhbCIsImltYWdlc0xvYWRlZCIsIm1hc29ucnkiLCJjb2x1bW5XaWR0aCIsIiQiLCJwb3NpdGlvbiIsIndpbmRvdyIsInNjcm9sbFRvcCIsInNjcm9sbCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJzY3JvbGxQZXJjZW50YWdlIiwiZG9jdW1lbnQiLCJoZWlnaHQiLCJjc3MiLCJvbiIsInJlbW92ZUF0dHIiLCJxdHkiLCJ0aGlzIiwiY2xvc2VzdCIsImZpbmQiLCJ2YWwiLCJwYXJzZUZsb2F0IiwibWF4IiwiYXR0ciIsIm1pbiIsInN0ZXAiLCJXT1ciLCJsaXZlIiwiYW5pbWF0ZUNsYXNzIiwid293IiwiaW5pdCIsIm1vYmlsZSIsImVhY2giLCIkdGhpcyIsInNldFRpbWVvdXQiLCJoYXNDbGFzcyIsInRvZ2dsZUNsYXNzIiwiYXR0ZW1wdHMiLCJoZWFkZXIiLCJoZWFkZXJIZWlnaHQiLCIkZGlhbG9nRWxlbWVudHMiLCJjaGVja0FuZFJlbW92ZURpYWxvZ3MiLCJjb25zb2xlIiwiZXEiLCJyZW1vdmUiLCJsb2ciLCJjb25jYXQiLCJ1bF93aWR0aCIsImRlbGF5Iiwib25CZWZvcmVTaG93IiwidWwiLCJjb250YWluZXJPZmZzZXQiLCJlbGVtIiwicGFnZV93aWR0aCIsImVsZW1fb2Zmc2V0IiwiZWxlbV93aWR0aCIsInBhcmVudHMiLCJvZmZzZXQiLCJsZWZ0Iiwib3V0ZXJXaWR0aCIsImNsaWNrIiwic2VsZWN0X2NvbmZpZyIsInJlc2l6ZSIsInJlYWR5IiwiYXBwbHlfbWFzb25yeSJdLCJtYXBwaW5ncyI6ImFBNFRBLFNBQVNBLHlCQUF5QkMsR0FTa0ksRUFBcEtDLE9BQVNDLGtCQUFUQyxRQUFvS0YsT0FBdElHLGtCQUFzSUMsUUFBQSxDQUFBQyxNQUExRUMsT0FDekZDLGVBQVdKLE9BQUFBLGtCQUFYSyxXQUtBLFNBQUlDLHVCQUFvQyxJQUFyQkMsRUFBcUIsRUFBQUMsVUFBQVQsYUFBQVUsSUFBQUQsVUFBQSxHQUFBQSxVQUFBLEdBQUFYLE9BQUEsNkJBQUFNLEVBQUEsRUFBQUssVUFBQVQsYUFBQVUsSUFBQUQsVUFBQSxHQUFBQSxVQUFBLEdBQUFYLE9BQUEsNkJBQUFhLEtBQUEsb0JBRXZDSCxFQURBRCxFQUFlQyxPQUNmSSxPQUFBQyxNQUFBLEtBTEdOLEVBQVlDLEVBQWlCLEdBQUdLLE1BQU0sS0FPMUNaLEVBQUFBLEdBQUFBLE9BQXFCYSxFQUFLTixJQUFBQSxPQUFpQk8sR0FDM0NSLEVBQUEsR0FBQUMsRUFBQSxLQUpDRCxFQUFVLEdBQUtDLEVBQWlCLElBTzlCQSxFQUFjLEdBQUdRLEVBQWNELEtBQUEsS0FDL0JULEVBQW9CUSxLQUFBTixFQUFZTyxLQUFBLE1BR3hCRSxTQUFBQSxjQUFjWCxFQUFBVSxHQUNkRSxJQUFBQSxFQUFlRixFQUFFRyxLQUNqQixtQkFMUmIsRUFBT2MsYUFBYSxXQUNoQkosRUFBQUssUUFBQSxDQURKQyxZQUFBLGNBUUhMLGFBQUEsdUJBSldDLGdCQUFpQkMsT0FsVjdCLFNBQUFJLEdBTUEsSUFBQUMsRUFBQUQsRUFBQUUsUUFBQUMsWUFFQ0gsRUFBRUUsUUFBUUUsT0FBTyxXQUFZLEVBQTNCRixFQUFBQSxlQUFlekIsVUFFaEIyQixFQUFNSixFQUFBRSxRQUFlekIsYUFDVndCLEdBRVRELEVBQUUsZUFBZUssU0FBUyxhQUQzQkwsRUFBQSxRQUFJ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Q3JGLE9BQU8sd0JBQXdCRSxRQVNsQ0osT0FBQUEsd0JBQTRCd0QsS0FBQSxXQUN6QmdDLGNBQVB0RixPQUFBLHlCQUFxQ0EsT0FBQXVDLFdBdlQxQyxDQTRURXZDLFFBNEJGQSxPQUFPaUMsVUFBVW9ELE1BQU0sV0FDbkJyRixPQUFPLDBCQUEwQitCLFlBQVkiLCJmaWxlIjoiY3VzdG9tLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRmlsZSBjdXN0b20uanMuXG4gKlxuICogVGhlbWUgQ3VzdG9taXplciBlbmhhbmNlbWVudHMgZm9yIGEgYmV0dGVyIHVzZXIgZXhwZXJpZW5jZS5cbiAqXG4gKiBDb250YWlucyBoYW5kbGVycyB0byBtYWtlIFRoZW1lIEN1c3RvbWl6ZXIgcHJldmlldyByZWxvYWQgY2hhbmdlcyBhc3luY2hyb25vdXNseS5cbiAqL1xuXG4oZnVuY3Rpb24gKCQpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0IFNjcm9sbFxuXHQgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0dmFyIHBvc2l0aW9uID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXHQkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcblxuXHRcdGlmICgkKCcuaGFzLXN0aWNreScpLmxlbmd0aCA+IDApIHtcblx0XHRcdHZhciBzY3JvbGwgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cdFx0XHRpZiAoc2Nyb2xsIDwgcG9zaXRpb24pIHtcblx0XHRcdFx0JCgnLmhhcy1zdGlja3knKS5hZGRDbGFzcygnaGVhZGVyLXVwJyk7XG5cdFx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcygnaGVhZGVyLS1pcy1zdGlja3knKTtcblx0XHRcdFx0JCgnLmhhcy1zdGlja3knKS5yZW1vdmVDbGFzcygnaGVhZGVyLWRvd24nKTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnLmhhcy1zdGlja3knKS5hZGRDbGFzcygnaGVhZGVyLWRvd24nKTtcblx0XHRcdFx0JCgnLmhhcy1zdGlja3knKS5yZW1vdmVDbGFzcygnaGVhZGVyLXVwICcpO1xuXHRcdFx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2hlYWRlci0taXMtc3RpY2t5Jyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoc2Nyb2xsID09IDApIHtcblx0XHRcdFx0JCgnLmhhcy1zdGlja3knKS5yZW1vdmVDbGFzcygnaGVhZGVyLXVwJyk7XG5cdFx0XHRcdCQoJy5oYXMtc3RpY2t5JykucmVtb3ZlQ2xhc3MoJ2hlYWRlci1kb3duJyk7XG5cdFx0XHRcdCQoJ2JvZHknKS5yZW1vdmVDbGFzcygnaGVhZGVyLS1pcy1zdGlja3knKTtcblx0XHRcdH1cblx0XHRcdHBvc2l0aW9uID0gc2Nyb2xsO1xuXHRcdH1cblxuXHRcdC8qICBiYWNrIHRvIHRvcCBiZyBmaWxsIGpzICovXG5cdFx0dmFyIHNjcm9sbFBlcmNlbnRhZ2UgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgLyAoJChkb2N1bWVudCkuaGVpZ2h0KCkgLSAkKHdpbmRvdykuaGVpZ2h0KCkpO1xuXHRcdCQoJy50ZXh0LXRvcCcpLmNzcyhcIi0tcHJvZ3Jlc3NcIiwgc2Nyb2xsUGVyY2VudGFnZSk7XG5cdH0pO1xuXG5cdCQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uIChlKSB7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdEFkZCB0byBjYXJ0IHdpdGggcGx1cyBtaW51c1xuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRqUXVlcnkoZG9jdW1lbnQpLm9uKCdjbGljaycsICdidXR0b24ucGx1cywgYnV0dG9uLm1pbnVzJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQkKCdidXR0b25bbmFtZT1cInVwZGF0ZV9jYXJ0XCJdJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblxuXHRcdFx0dmFyIHF0eSA9ICQodGhpcykuY2xvc2VzdCgnLnF1YW50aXR5JykuZmluZCgnLnF0eScpO1xuXG5cblx0XHRcdGlmIChxdHkudmFsKCkgPT0gJycpIHtcblx0XHRcdFx0cXR5LnZhbCgwKTtcblx0XHRcdH1cblx0XHRcdHZhciB2YWwgPSBwYXJzZUZsb2F0KHF0eS52YWwoKSk7XG5cblx0XHRcdHZhciBtYXggPSBwYXJzZUZsb2F0KHF0eS5hdHRyKCdtYXgnKSk7XG5cdFx0XHR2YXIgbWluID0gcGFyc2VGbG9hdChxdHkuYXR0cignbWluJykpO1xuXHRcdFx0dmFyIHN0ZXAgPSBwYXJzZUZsb2F0KHF0eS5hdHRyKCdzdGVwJykpO1xuXG5cdFx0XHQvLyBDaGFuZ2UgdGhlIHZhbHVlIGlmIHBsdXMgb3IgbWludXNcblx0XHRcdGlmICgkKHRoaXMpLmlzKCcucGx1cycpKSB7XG5cdFx0XHRcdGlmIChtYXggJiYgKG1heCA8PSB2YWwpKSB7XG5cdFx0XHRcdFx0cXR5LnZhbChtYXgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHF0eS52YWwodmFsICsgc3RlcCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChtaW4gJiYgKG1pbiA+PSB2YWwpKSB7XG5cblx0XHRcdFx0XHRxdHkudmFsKG1pbik7XG5cdFx0XHRcdH0gZWxzZSBpZiAodmFsID49IDEpIHtcblxuXHRcdFx0XHRcdHF0eS52YWwodmFsIC0gc3RlcCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8qLS0gV293IEFuaW1hdGlvbiAtLSovXG5cdFx0dmFyIHdvdyA9IG5ldyBXT1coe1xuXHRcdFx0Ym94Q2xhc3M6ICd3b3cnLFxuXHRcdFx0YW5pbWF0ZUNsYXNzOiAnYW5pbWF0ZWQnLFxuXHRcdFx0b2Zmc2V0OiAwLFxuXHRcdFx0bW9iaWxlOiB0cnVlLFxuXHRcdFx0bGl2ZTogdHJ1ZVxuXHRcdH0pO1xuXHRcdHdvdy5pbml0KCk7XG5cblx0XHQvKj09PT09PT09PT09PT09PT1cblx0XHRtYXNvbnJ5XG5cdFx0PT09PT09PT09PT09PT09PT09PT09Ki9cblx0XHRpZiAoalF1ZXJ5KCcuaXFvbmljLW1hc29ucnktZ3JpZCcpLmxlbmd0aCA+IDApIHtcblx0XHRcdGpRdWVyeSgnLmlxb25pYy1tYXNvbnJ5LWdyaWQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0bGV0ICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuXHRcdFx0XHRsZXQgaG9yaXpvbnRhbCA9ICR0aGlzLmRhdGEoXCJob3Jpem9udGFsLW9yZGVyXCIpO1xuXHRcdFx0XHQvLyBsZXQgaG9yaXpvbnRhbCA9IGpRdWVyeSh0aGlzKS5kYXRhKFwiZ3V0dGVyXCIpO1xuXHRcdFx0XHRqUXVlcnkoXCIuaXFvbmljLW1hc29ucnktYmxvY2tcIikuaW1hZ2VzTG9hZGVkKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHQkdGhpcy5tYXNvbnJ5KHtcblx0XHRcdFx0XHRcdGNvbHVtbldpZHRoOiBcIi5ncmlkLXNpemVyXCIsXG5cdFx0XHRcdFx0XHRpdGVtU2VsZWN0b3I6IFwiLmlxb25pYy1tYXNvbnJ5LWl0ZW1cIixcblx0XHRcdFx0XHRcdGhvcml6b250YWxPcmRlcjogaG9yaXpvbnRhbCxcblx0XHRcdFx0XHRcdC8vIGd1dHRlcjogMTBcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdCBtYWluIG1lbnUgdG9nZ2xlXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdCQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgJy5jdXN0b20tdG9nZ2xlcicsIGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmICgkKCcuY3NzX3ByZWZpeC1tb2JpbGUtbWVudSAnKS5oYXNDbGFzcygnbWVudS1vcGVuJykpIHtcblx0XHRcdFx0JCgnLmNzc19wcmVmaXgtbW9iaWxlLW1lbnUgJykudG9nZ2xlQ2xhc3MoJ29wZW4tZGVsYXknKTtcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0JCgnLmNzc19wcmVmaXgtbW9iaWxlLW1lbnUgJykudG9nZ2xlQ2xhc3MoJ21lbnUtb3BlbicpO1xuXHRcdFx0XHRcdCQoJy5jc3NfcHJlZml4LW1vYmlsZS1tZW51ICcpLnRvZ2dsZUNsYXNzKCdvcGVuLWRlbGF5Jyk7XG5cdFx0XHRcdH0sIDEwMDApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnLmNzc19wcmVmaXgtbW9iaWxlLW1lbnUgJykudG9nZ2xlQ2xhc3MoJ21lbnUtb3BlbicpO1xuXHRcdFx0fVxuXHRcdFx0JCgnLm9wbi1tZW51JykudG9nZ2xlQ2xhc3MoJ2Nzc19wcmVmaXgtb3BlbicpO1xuXHRcdH0pO1xuXG5cdFx0JChkb2N1bWVudCkub24oXCJjbGlja1wiLCAnLmhhbS10b2dnbGUnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHQkKCcuaGFtLXRvZ2dsZSAubWVudS1idG4nKS50b2dnbGVDbGFzcygnaXMtYWN0aXZlJyk7XG5cdFx0fSk7XG5cdFx0JChkb2N1bWVudCkub24oXCJjbGlja1wiLCAnLm1vYi10b2dnbGUnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHQkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ292ZXJmbG93LWhpZGRlbicpO1xuXHRcdH0pO1xuXG5cblx0fSk7XG5cblx0JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRIYW5kbGUgcG9yZm9saW8gaW1hZ2UgY2xpY2tzLlxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHQkKCcuaXEtZmFuY3lib3gtaW1hZ2UnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0Y29uc3QgbWF4QXR0ZW1wdHMgPSAxMDtcblx0XHRcdGxldCBhdHRlbXB0cyA9IDA7XG5cdFx0XHRjb25zdCBjaGVja0ludGVydmFsID0gMTAwO1xuXG5cdFx0XHQoZnVuY3Rpb24gY2hlY2tBbmRSZW1vdmVEaWFsb2dzKCkge1xuXHRcdFx0XHRjb25zdCAkZGlhbG9nRWxlbWVudHMgPSAkKCcuZGlhbG9nLXdpZGdldC5kaWFsb2ctbGlnaHRib3gtd2lkZ2V0LmRpYWxvZy10eXBlLWJ1dHRvbnMuZGlhbG9nLXR5cGUtbGlnaHRib3guZWxlbWVudG9yLWxpZ2h0Ym94Jyk7XG5cblx0XHRcdFx0aWYgKCRkaWFsb2dFbGVtZW50cy5sZW5ndGggPT09IDIpIHtcblx0XHRcdFx0XHQkZGlhbG9nRWxlbWVudHMuZXEoMSkucmVtb3ZlKCk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYFNlY29uZCBkaWFsb2cgcmVtb3ZlZCBhZnRlciAke2F0dGVtcHRzICsgMX0gYXR0ZW1wdHMuYCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoYXR0ZW1wdHMrKyA8IG1heEF0dGVtcHRzKSB7IC8vIEluY3JlbWVudCBhdHRlbXB0cyBoZXJlXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYEF0dGVtcHQgJHthdHRlbXB0c306IEZvdW5kICR7JGRpYWxvZ0VsZW1lbnRzLmxlbmd0aH0gZGlhbG9ncy4gUmV0cnlpbmcuLi5gKTtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGNoZWNrQW5kUmVtb3ZlRGlhbG9ncywgY2hlY2tJbnRlcnZhbCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ01heCBhdHRlbXB0cyByZWFjaGVkLiBEaWFsb2dzIG5vdCBmb3VuZCB3aXRoIGxlbmd0aCAyLicpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KSgpO1xuXHRcdH0pO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdFx0c3VwZXJmaXNoIG1lbnVcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0JCgndWwuc2YtbWVudScpLnN1cGVyZmlzaCh7XG5cdFx0XHRkZWxheTogNTAwLFxuXHRcdFx0b25CZWZvcmVTaG93OiBmdW5jdGlvbiAodWwpIHtcblx0XHRcdFx0dmFyIGVsZW0gPSAkKHRoaXMpO1xuXHRcdFx0XHR2YXIgZWxlbV9vZmZzZXQgPSAwLFxuXHRcdFx0XHRcdGVsZW1fd2lkdGggPSAwLFxuXHRcdFx0XHRcdHVsX3dpZHRoID0gMDtcblx0XHRcdFx0Ly8gQWRkIGNsYXNzIGlmIG1lbnUgYXQgdGhlIGVkZ2Ugb2YgdGhlIHdpbmRvd1xuXHRcdFx0XHRpZiAoZWxlbS5sZW5ndGggPT0gMSkge1xuXHRcdFx0XHRcdHZhciBwYWdlX3dpZHRoID0gJCgnI3BhZ2Uuc2l0ZScpLndpZHRoKCksXG5cdFx0XHRcdFx0XHRlbGVtX29mZnNldCA9IGVsZW0ucGFyZW50cygnbGknKS5lcSgwKS5vZmZzZXQoKS5sZWZ0LFxuXHRcdFx0XHRcdFx0ZWxlbV93aWR0aCA9IGVsZW0ucGFyZW50cygnbGknKS5lcSgwKS5vdXRlcldpZHRoKCksXG5cdFx0XHRcdFx0XHR1bF93aWR0aCA9IGVsZW0ub3V0ZXJXaWR0aCgpO1xuXG5cdFx0XHRcdFx0aWYgKGVsZW0uaGFzQ2xhc3MoJ2lxb25pYy1tZWdhbWVudS1jb250YWluZXInKSkge1xuXHRcdFx0XHRcdFx0aWYgKGVsZW0uaGFzQ2xhc3MoJ2lxb25pYy1mdWxsLXdpZHRoJykpIHtcblx0XHRcdFx0XHRcdFx0JCgnLmlxb25pYy1tZWdhbWVudS1jb250YWluZXIuaXFvbmljLWZ1bGwtd2lkdGgnKS5jc3Moe1xuXHRcdFx0XHRcdFx0XHRcdCdsZWZ0JzogLWVsZW1fb2Zmc2V0LFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChlbGVtLmhhc0NsYXNzKCdpcW9uaWMtY29udGFpbmVyLXdpZHRoJykpIHtcblx0XHRcdFx0XHRcdFx0bGV0IGNvbnRhaW5lck9mZnNldCA9IChlbGVtLmNsb3Nlc3QoJy5lbGVtZW50b3ItY29udGFpbmVyJykubGVuZ3RoID4gMCkgPyBlbGVtLmNsb3Nlc3QoJy5lbGVtZW50b3ItY29udGFpbmVyJykub2Zmc2V0KCkgOiBlbGVtLnBhcmVudHMoJ2xpJykuZXEoMCkuY2xvc2VzdCgnaGVhZGVyIC5jb250YWluZXItZmx1aWQgbmF2LGhlYWRlciAuY29udGFpbmVyIG5hdicpLm9mZnNldCgpO1xuXHRcdFx0XHRcdFx0XHQkKCcuaXFvbmljLW1lZ2FtZW51LWNvbnRhaW5lci5pcW9uaWMtY29udGFpbmVyLXdpZHRoJykuY3NzKHtcblx0XHRcdFx0XHRcdFx0XHQnbGVmdCc6IC0oZWxlbV9vZmZzZXQgLSBjb250YWluZXJPZmZzZXQubGVmdClcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChlbGVtX29mZnNldCArIGVsZW1fd2lkdGggKyB1bF93aWR0aCA+IHBhZ2Vfd2lkdGggLSAyMCAmJiBlbGVtX29mZnNldCAtIHVsX3dpZHRoID4gMCkge1xuXHRcdFx0XHRcdFx0ZWxlbS5hZGRDbGFzcygnb3Blbi1zdWJtZW51LW1haW4nKTtcblx0XHRcdFx0XHRcdGVsZW0uY3NzKHtcblx0XHRcdFx0XHRcdFx0J2xlZnQnOiAnYXV0bycsXG5cdFx0XHRcdFx0XHRcdCdyaWdodCc6ICcwJ1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGVsZW0ucmVtb3ZlQ2xhc3MoJ29wZW4tc3VibWVudS1tYWluJyk7XG5cdFx0XHRcdFx0XHRlbGVtLmNzcyh7fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChlbGVtLnBhcmVudHMoXCJ1bFwiKS5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0dmFyIHBhZ2Vfd2lkdGggPSAkKCcjcGFnZS5zaXRlJykud2lkdGgoKTtcblx0XHRcdFx0XHRlbGVtX29mZnNldCA9IGVsZW0ucGFyZW50cyhcInVsXCIpLmVxKDApLm9mZnNldCgpLmxlZnQ7XG5cdFx0XHRcdFx0ZWxlbV93aWR0aCA9IGVsZW0ucGFyZW50cyhcInVsXCIpLmVxKDApLm91dGVyV2lkdGgoKTtcblx0XHRcdFx0XHR1bF93aWR0aCA9IGVsZW0ub3V0ZXJXaWR0aCgpO1xuXG5cdFx0XHRcdFx0aWYgKGVsZW1fb2Zmc2V0ICsgZWxlbV93aWR0aCArIHVsX3dpZHRoID4gcGFnZV93aWR0aCAtIDIwICYmIGVsZW1fb2Zmc2V0IC0gdWxfd2lkdGggPiAwKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmFkZENsYXNzKCdvcGVuLXN1Ym1lbnUtbGVmdCcpO1xuXHRcdFx0XHRcdFx0ZWxlbS5jc3Moe1xuXHRcdFx0XHRcdFx0XHQnbGVmdCc6ICdhdXRvJyxcblx0XHRcdFx0XHRcdFx0J3JpZ2h0JzogJzEwMCUnXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZWxlbS5yZW1vdmVDbGFzcygnb3Blbi1zdWJtZW51LWxlZnQnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAgU2VhcmNoIEJhciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRpZiAoJChcIi5idG4tc2VhcmNoXCIpLmxlbmd0aCA+IDApIHtcblx0XHRcdCQoXCIuYnRuLXNlYXJjaFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLmNzc19wcmVmaXgtc2VhcmNoJykudG9nZ2xlQ2xhc3MoJ3NlYXJjaC0tb3BlbicpO1xuXHRcdFx0fSk7XG5cdFx0XHQkKFwiLmJ0bi1zZWFyY2gtY2xvc2VcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5jc3NfcHJlZml4LXNlYXJjaCcpLnRvZ2dsZUNsYXNzKCdzZWFyY2gtLW9wZW4nKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdCQoXCIubmF2YmFyLXRvZ2dsZXJcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKCQod2luZG93KS53aWR0aCgpIDwgMTIwMCkge1xuXHRcdFx0XHQkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ292ZXJmbG93LWhpZGRlbicpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdCQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKCQod2luZG93KS53aWR0aCgpID4gMTIwMCkge1xuXHRcdFx0XHRpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdvdmVyZmxvdy1oaWRkZW4nKSkge1xuXHRcdFx0XHRcdCQoJ2JvZHknKS5yZW1vdmVDbGFzcygnb3ZlcmZsb3ctaGlkZGVuJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICgkKCcubmF2YmFyLXRvZ2dsZXInKS5oYXNDbGFzcygnbW9ibGllLW1lbnUtYWN0aXZlJykpIHtcblx0XHRcdFx0XHQkKCdib2R5JykuYWRkQ2xhc3MoJ292ZXJmbG93LWhpZGRlbicpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0XHRTZWxlY3Rcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdGlmICgkKCdzZWxlY3QnKS5sZW5ndGggPiAwKSB7XG5cblx0XHRcdCQoJ3NlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRsZXQgc2VsZWN0X2NvbmZpZyA9IHtcblx0XHRcdFx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdFx0XHRcdGRyb3Bkb3duUGFyZW50OiAkKHRoaXMpLnBhcmVudCgpXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCQodGhpcykucGFyZW50KCkuY2xvc2VzdChcIi5jaGVja291dFwiKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0c2VsZWN0X2NvbmZpZyA9IHtcblx0XHRcdFx0XHRcdHdpZHRoOiAnMTAwJScsXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdCQodGhpcykuc2VsZWN0MihzZWxlY3RfY29uZmlnKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcuc2VsZWN0Mi1jb250YWluZXInKS5hZGRDbGFzcygnd2lkZScpO1xuXG5cdFx0fVxuXHRcdC8vIHNob3Agc2lkZWJhciB0b2dnbGUgYnV0dG9uXG5cdFx0aWYgKCQoJy5zaG9wLWZpbHRlci1zaWRlYmFyJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywnLnNob3AtZmlsdGVyLXNpZGViYXInLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuZmluZCgnLmNzc19wcmVmaXgtd29vLXNpZGViYXInKS50b2dnbGVDbGFzcygnd29vLXNpZGViYXItb3BlbicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblx0XHQkKCdpbWcnKS5yZW1vdmVBdHRyKCd0aXRsZScpO1xuXG5cdFx0ZnVuY3Rpb24gaGVhZGVySGVpZ2h0KCkge1xuICAgICAgICBcdGNvbnN0IGhlYWRlciA9IGpRdWVyeSgnLmhlYWRlci1kZWZhdWx0Jyk7XG5cblx0XHRcdGlmKGhlYWRlcikge1xuXHRcdFx0XHRsZXQgaGVhZGVySGVpZ2h0ID0gaGVhZGVyLmhlaWdodCgpO1xuXHRcblx0XHRcdFx0alF1ZXJ5KCdodG1sJykuY3NzKCctLWhlYWRlci1oZWlnaHQnLCAoaGVhZGVySGVpZ2h0IC8gMTYpICsgJ2VtJyk7XG5cdFx0XHR9XG4gICAgXHR9XG5cblx0XHRoZWFkZXJIZWlnaHQoKTtcblx0XHRcblx0XHRqUXVlcnkod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJ3aWRub3cgcmVzaXplXCIpO1xuXHRcdFx0XG5cdFx0XHRoZWFkZXJIZWlnaHQoKTtcblx0XHR9KVxuXG5cdH0pO1xuXG5cblx0Lyo9PT09PT09PT09PT09PT09PT09PT1cblx0cG9ydGZvbGlvLW1hc29ucnlcblx0PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4gICAgalF1ZXJ5KHdpbmRvdykucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBNYXNvbnJ5XG4gICAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAgICAgaWYgKGpRdWVyeSgnLmlxb25pYy1tYXNvbnJ5LWdyaWQnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBqUXVlcnkoJy5pcW9uaWMtbWFzb25yeS1ncmlkJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYXBwbHlfbWFzb25yeShqUXVlcnkoXCIuaXFvbmljLW1hc29ucnktYmxvY2tcIiksIGpRdWVyeSh0aGlzKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG59KGpRdWVyeSkpO1xuXG5mdW5jdGlvbiBqc19wcmVmaXhBamF4RG9uZUhhbmRsZXIoZSkge1xuXHRpZiAoalF1ZXJ5KCdzZWxlY3Qub3JkZXJieScpLmxlbmd0aCA+IDApIHtcblx0XHRqUXVlcnkoJ3NlbGVjdC5vcmRlcmJ5Jykuc2VsZWN0Mih7XG5cdFx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdFx0ZHJvcGRvd25QYXJlbnQ6IGpRdWVyeSgnc2VsZWN0Lm9yZGVyYnknKS5wYXJlbnQoKVxuXHRcdH0pO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZV9wcm9kdWN0X2NvdW50KHJlc3VsdF9jb3VudF9lbGVtZW50ID0galF1ZXJ5KCcud29vY29tbWVyY2UtcmVzdWx0LWNvdW50JyksIHBlcl9wYWdlZCA9IGpRdWVyeSgnLndvb2NvbW1lcmNlLXJlc3VsdC1jb3VudCcpLmRhdGEoJ3Byb2R1Y3QtcGVyLXBhZ2UnKSkge1xuXHRsZXQgdGV4dCA9IHJlc3VsdF9jb3VudF9lbGVtZW50LnRleHQoKTtcblx0bGV0IGNvbnRlbnRfdGV4dF9hcnIgPSB0ZXh0LnRyaW0oKS5zcGxpdCgnICcpO1xuXHRsZXQgY291bnRfYXJyID0gY29udGVudF90ZXh0X2FyclsxXS5zcGxpdCgn4oCTJyk7XG5cblx0Y291bnRfYXJyWzFdID0gTnVtYmVyKGNvdW50X2FyclsxXSkgKyBOdW1iZXIocGVyX3BhZ2VkKTtcblx0aWYgKGNvdW50X2FyclsxXSA+IGNvbnRlbnRfdGV4dF9hcnJbM10pIHtcblx0XHRjb3VudF9hcnJbMV0gPSBjb250ZW50X3RleHRfYXJyWzNdO1xuXHR9XG5cdGNvbnRlbnRfdGV4dF9hcnJbMV0gPSBjb3VudF9hcnIuam9pbign4oCTJylcblx0cmVzdWx0X2NvdW50X2VsZW1lbnQuaHRtbChjb250ZW50X3RleHRfYXJyLmpvaW4oJyAnKSk7XG59XG5cbmZ1bmN0aW9uIGFwcGx5X21hc29ucnkocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIGxldCBob3Jpem9udGFsID0gc2VsZWN0b3IuZGF0YShcImhvcml6b250YWxvcmRlclwiKTtcbiAgICBwYXJlbnQuaW1hZ2VzTG9hZGVkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZWN0b3IubWFzb25yeSh7XG4gICAgICAgICAgICBjb2x1bW5XaWR0aDogXCIuZ3JpZC1zaXplclwiLFxuICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiBcIi5pcW9uaWMtbWFzb25yeS1pdGVtXCIsXG4gICAgICAgICAgICBob3Jpem9udGFsT3JkZXI6IGhvcml6b250YWwsXG4gICAgICAgICAgICAvLyBndXR0ZXI6IGd1dHRlclNwYWNlXG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIGpRdWVyeSgnLmljaGVja2JveF9zcXVhcmUtYmx1ZScpLnJlbW92ZUNsYXNzKCdpY2hlY2tib3hfc3F1YXJlLWJsdWUnKTtcbn0pOyJdfQ==